const _0x30c0de=_0x8129;function _0x14a4(){const _0xb880fd=['Failed\x20to\x20subscribe\x20to\x20','res_customer_info','24rNfvrx','enData','UCC/VCall/','ping','https://portal-ccbs.mobimart.xyz/api/update-status','MQTT\x20Connected','process\x20before\x20ping','60276ipnzOf','MQTT','fromCharCode','customer','parse','Subscription\x20error:','signal','302912zzDhNR','Client','336gnrjQs','log','bind','785345MBUdvR','11YwpTTY','video','317340aFBgYc','135RmhqdO','substring','pushMsg','onMessageArrived_original:\x20','call_id','dest','send','219219WvfnNx','phone','onConnectionLost','request_id','MQTT\x20client\x20is\x20not\x20connected','18LubdYw','start\x20before\x20timeout','callcenter','onMessageArrived\x20','error','errorMessage','202195aCBsNu','client','Connection\x20error:','random','floor','sip_call_id','MQTT\x20client\x20end\x20send\x20Message\x20','destinationName','data_hash','connect','getTime','15499601oRJCjS','4OhIUcn','subscribe','replace','stringify','pong','videocall.vnpt.vn','Message','isConnected','post','MQTT\x20cliet\x20start\x20send\x20Message','onMessageArrived'];_0x14a4=function(){return _0xb880fd;};return _0x14a4();}(function(_0xe680b0,_0x1bc151){const _0x128eb3=_0x8129,_0x56a768=_0xe680b0();while(!![]){try{const _0x176ab5=-parseInt(_0x128eb3(0x1af))/0x1+-parseInt(_0x128eb3(0x1a9))/0x2*(parseInt(_0x128eb3(0x1a4))/0x3)+-parseInt(_0x128eb3(0x1bb))/0x4*(parseInt(_0x128eb3(0x199))/0x5)+parseInt(_0x128eb3(0x1cf))/0x6*(-parseInt(_0x128eb3(0x196))/0x7)+parseInt(_0x128eb3(0x194))/0x8*(-parseInt(_0x128eb3(0x19d))/0x9)+parseInt(_0x128eb3(0x19c))/0xa*(parseInt(_0x128eb3(0x19a))/0xb)+-parseInt(_0x128eb3(0x1c8))/0xc*(-parseInt(_0x128eb3(0x1ba))/0xd);if(_0x176ab5===_0x1bc151)break;else _0x56a768['push'](_0x56a768['shift']());}catch(_0x15d120){_0x56a768['push'](_0x56a768['shift']());}}}(_0x14a4,0x5540f));function _0x8129(_0x10f22a,_0x285cbd){const _0x14a435=_0x14a4();return _0x8129=function(_0x8129b,_0x4b88e1){_0x8129b=_0x8129b-0x191;let _0x55115b=_0x14a435[_0x8129b];return _0x55115b;},_0x8129(_0x10f22a,_0x285cbd);}class MQTTClient{[_0x30c0de(0x1a1)];[_0x30c0de(0x1b4)];[_0x30c0de(0x1a7)];[_0x30c0de(0x1a5)];[_0x30c0de(0x1b7)];constructor(_0x1233aa,_0x20e07d,_0xcf1646,_0x3545f1,_0x26bc21){const _0x9cd2db=_0x30c0de;this[_0x9cd2db(0x1b0)]=new Paho[(_0x9cd2db(0x1d0))][(_0x9cd2db(0x195))](_0x9cd2db(0x1c0),Number('8081'),''+Math[_0x9cd2db(0x1b2)]()['toString'](0x14)[_0x9cd2db(0x19e)](0x2,0x8)),this[_0x9cd2db(0x1a1)]=_0x1233aa,this['sip_call_id']=_0x20e07d,this['request_id']=_0xcf1646,this[_0x9cd2db(0x1b7)]=_0x26bc21,this['phone']=_0x3545f1,this['client'][_0x9cd2db(0x1a6)]=this[_0x9cd2db(0x1a6)][_0x9cd2db(0x198)](this),this['client'][_0x9cd2db(0x1c5)]=this[_0x9cd2db(0x1c5)][_0x9cd2db(0x198)](this);}['connect'](){const _0x2bf84e=_0x30c0de,_0x58b740={'useSSL':!![],'timeout':0x3,'keepAliveInterval':0xf,'cleanSession':!![],'reconnect':!![],'onSuccess':()=>{const _0x2cb8f5=_0x8129;console[_0x2cb8f5(0x197)](_0x2cb8f5(0x1cd));},'onFailure':_0x4a3fa8=>{alert('MQTT\x20Connection\x20Failed:\x20'+_0x4a3fa8['errorMessage']);}};try{this['client'][_0x2bf84e(0x1b8)](_0x58b740);}catch(_0xeb39a6){console[_0x2bf84e(0x1ad)](_0x2bf84e(0x1b1),_0xeb39a6);}}[_0x30c0de(0x1bc)](_0x2a04ed,_0x56da30=0x0){const _0x5d82bd=_0x30c0de;if(!this[_0x5d82bd(0x1b0)][_0x5d82bd(0x1c2)]())return console[_0x5d82bd(0x1ad)]('Cannot\x20subscribe:\x20MQTT\x20client\x20is\x20not\x20connected'),![];try{return this[_0x5d82bd(0x1b0)]['subscribe'](_0x2a04ed,{'qos':_0x56da30,'onSuccess':()=>{return!![];},'onFailure':_0x86cbc1=>{const _0x2561f1=_0x5d82bd;return console[_0x2561f1(0x1ad)](_0x2561f1(0x1c6)+_0x2a04ed+':\x20'+_0x86cbc1[_0x2561f1(0x1ae)]),![];}}),!![];}catch(_0xf3913){return console[_0x5d82bd(0x1ad)](_0x5d82bd(0x192),_0xf3913),![];}}['enData'](_0x3477c6){const _0x459a1f=_0x30c0de;return btoa(encodeURIComponent(_0x3477c6)[_0x459a1f(0x1bd)](/%([0-9A-F]{2})/g,function(_0x1398a3,_0x6ddb9c){const _0x3b0012=_0x459a1f;return String[_0x3b0012(0x1d1)](parseInt(_0x6ddb9c,0x10));}));}[_0x30c0de(0x19f)](_0x1c4dc0){const _0x1632fc=_0x30c0de;console[_0x1632fc(0x1ad)](_0x1632fc(0x1c4));if(!this[_0x1632fc(0x1b0)][_0x1632fc(0x1c2)]()){console[_0x1632fc(0x1ad)](_0x1632fc(0x1a8));return;}let _0x45ae93=new Date()[_0x1632fc(0x1b9)]();_0x45ae93=Math[_0x1632fc(0x1b3)](_0x45ae93/0x3e8);const _0x1bd94a={..._0x1c4dc0,'time':_0x45ae93},_0x48339c=JSON[_0x1632fc(0x1be)](_0x1bd94a),_0x2239d9=new Paho[(_0x1632fc(0x1d0))][(_0x1632fc(0x1c1))](this[_0x1632fc(0x1c9)](_0x48339c));console[_0x1632fc(0x197)](_0x2239d9),_0x2239d9[_0x1632fc(0x1b6)]=_0x1632fc(0x1ca)+this[_0x1632fc(0x1a1)],_0x2239d9['qos']=0x0,this[_0x1632fc(0x1b0)][_0x1632fc(0x1a3)](_0x2239d9),console[_0x1632fc(0x1ad)](_0x1632fc(0x1b5));}[_0x30c0de(0x1a6)](_0x453053){const _0x16b4dd=_0x30c0de;_0x453053['errorCode']!==0x0&&console[_0x16b4dd(0x1ad)]('MQTT\x20Connection\x20Lost:',_0x453053['errorMessage']);}async[_0x30c0de(0x1c5)](_0x39263d){const _0xf9891c=_0x30c0de;console[_0xf9891c(0x197)](_0xf9891c(0x1a0)+_0x39263d['payloadString']);var _0x5cdce6=JSON[_0xf9891c(0x191)](atob(_0x39263d['payloadString']));console['log'](_0xf9891c(0x1ac)+JSON[_0xf9891c(0x1be)](_0x5cdce6));if(_0x5cdce6[_0xf9891c(0x193)]!=_0xf9891c(0x1cb)&&_0x5cdce6[_0xf9891c(0x193)]!='pong'){var _0xe5a49b=this[_0xf9891c(0x1b7)],_0x152a3f={'data':_0xe5a49b,'status_call':_0x5cdce6[_0xf9891c(0x193)]};await axios[_0xf9891c(0x1c3)](_0xf9891c(0x1cc),_0x152a3f);}const _0x50dbce=new Date(),_0x56e962=Math[_0xf9891c(0x1b3)](_0x50dbce[_0xf9891c(0x1b9)]()/0x3e8);if(_0x5cdce6[_0xf9891c(0x193)]=='req_customer_info'&&_0x5cdce6['dest']==_0xf9891c(0x1d2)){const _0xc6575c={'dest':'callcenter','signal':_0xf9891c(0x1c7),'type_call':_0xf9891c(0x19b),'time':_0x56e962,'data':{'name':this[_0xf9891c(0x1a5)],'call_id':this['call_id'],'sip_call_id':this[_0xf9891c(0x1b4)],'data_options':{'msisdn':this[_0xf9891c(0x1a5)],'request_id':this[_0xf9891c(0x1a7)]}}};this['pushMsg'](_0xc6575c),console[_0xf9891c(0x197)](_0xf9891c(0x1aa)),setTimeout(()=>{const _0x58c7fe=_0xf9891c;console[_0x58c7fe(0x197)](_0x58c7fe(0x1ce)),this[_0x58c7fe(0x19f)]({'dest':'callcenter','signal':_0x58c7fe(0x1cb),'type_call':_0x58c7fe(0x19b),'time':Math[_0x58c7fe(0x1b3)](new Date()['getTime']()/0x3e8),'data':{}});},0xfa0);}_0x5cdce6['signal']==_0xf9891c(0x1cb)&&_0x5cdce6['dest']=='customer'&&setTimeout(()=>{const _0xa264c4=_0xf9891c;this[_0xa264c4(0x19f)]({'dest':_0xa264c4(0x1ab),'signal':_0xa264c4(0x1bf),'type_call':'video','time':Math[_0xa264c4(0x1b3)](new Date()[_0xa264c4(0x1b9)]()/0x3e8),'data':{}});},0xfa0),_0x5cdce6[_0xf9891c(0x193)]==_0xf9891c(0x1bf)&&_0x5cdce6[_0xf9891c(0x1a2)]==_0xf9891c(0x1d2)&&setTimeout(()=>{const _0x5acac9=_0xf9891c;this[_0x5acac9(0x19f)]({'dest':'callcenter','signal':_0x5acac9(0x1cb),'type_call':'video','time':Math['floor'](new Date()[_0x5acac9(0x1b9)]()/0x3e8),'data':{}});},0xfa0);}}